<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manager Salary & FTE Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f4f7f9;
        }
        .input-label {
            @apply block text-sm font-medium text-gray-700 mb-1;
        }
        .input-field {
            @apply w-full p-3 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 transition duration-150 ease-in-out text-base;
        }
        .result-box {
            @apply bg-white p-6 rounded-xl shadow-lg border border-indigo-200;
        }
    </style>
</head>
<body class="p-4 sm:p-8 min-h-screen">

    <div id="app" class="max-w-4xl mx-auto">
        
        <!-- Header and Title -->
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 mb-2">
                Team Salary Prorata Calculator
            </h1>
            <p class="text-lg text-gray-600">Calculate Base Salary or FTE Salary based on working hours.</p>
        </header>

        <!-- Main Card Container -->
        <div class="bg-white rounded-2xl shadow-2xl p-6 sm:p-10">

            <!-- Tab Navigation -->
            <div class="flex border-b border-gray-200 mb-6">
                <button 
                    id="tab-base-salary"
                    data-mode="1"
                    class="tab-button py-3 px-6 font-semibold text-center transition duration-200 ease-in-out rounded-t-lg"
                >
                    Calculate Base Salary
                </button>
                <button 
                    id="tab-fte-salary"
                    data-mode="2"
                    class="tab-button py-3 px-6 font-semibold text-center transition duration-200 ease-in-out rounded-t-lg"
                >
                    Calculate FTE Salary
                </button>
            </div>

            <div id="calculator-content">
                <!-- Inputs Section -->
                <div class="grid md:grid-cols-2 gap-6 mb-8 p-4 bg-indigo-50 rounded-xl border border-indigo-200">
                    <!-- Weekly Hours (Actual) -->
                    <div>
                        <label for="weeklyHours" class="input-label">
                            1. Team Member's Actual Weekly Hours
                        </label>
                        <input type="number" id="weeklyHours" value="30.00" min="0" step="0.01" class="input-field" placeholder="e.g., 30.00">
                        <p class="text-xs text-gray-500 mt-1">Hours the individual actually works per week.</p>
                    </div>

                    <!-- FTE Hours (Full Time) -->
                    <div>
                        <label for="fteHours" class="input-label">
                            2. Role's Full-Time Weekly Hours (FTE)
                        </label>
                        <input type="number" id="fteHours" value="37.50" min="0" step="0.01" class="input-field" placeholder="e.g., 37.50">
                        <p class="text-xs text-gray-500 mt-1">Full-time hours for this specific role (e.g., 37.5, 40, 45).</p>
                    </div>
                </div>

                <!-- Known Salary Input (Changes based on mode) -->
                <div class="mb-8">
                    <label id="known-salary-label" for="knownSalary" class="input-label text-lg font-bold">
                        3. Enter the Full-Time Equivalent (FTE) Salary (£)
                    </label>
                    <input type="number" id="knownSalary" value="45000.00" min="0" step="0.01" class="input-field text-xl font-mono text-green-700 bg-green-50 border-green-300" placeholder="0.00">
                    <p id="known-salary-help" class="text-sm text-gray-500 mt-2">
                        Enter the full-time equivalent salary to calculate the prorated Base Salary.
                    </p>
                </div>


                <!-- Results Section -->
                <div class="p-6 bg-indigo-100 rounded-xl">
                    <h2 class="text-2xl font-bold text-indigo-800 mb-4">Calculation Results</h2>
                    <div class="grid md:grid-cols-2 gap-6">
                        
                        <!-- FTE % Result -->
                        <div class="result-box">
                            <p class="text-sm text-gray-500">Full-Time Equivalent (FTE) Percentage</p>
                            <div class="text-3xl font-bold text-indigo-600 mt-1" id="ftePercentageDisplay">0.00%</div>
                            <p class="text-xs text-gray-500 mt-1">Weekly Hours / FTE Hours</p>
                        </div>

                        <!-- Calculated Salary Result -->
                        <div class="result-box bg-indigo-50 border-indigo-400">
                            <p class="text-sm text-gray-500" id="calculated-salary-label-display">Calculated Base Salary</p>
                            <div class="text-4xl font-extrabold text-indigo-800 mt-1" id="calculatedSalaryDisplay">£0.00</div>
                            <p class="text-xs text-gray-500 mt-1" id="calculated-formula-display">FTE Salary * FTE %</p>
                        </div>

                    </div>
                </div>

                <!-- Error Message -->
                <div id="errorMessage" class="hidden mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg" role="alert">
                    Please ensure all input fields are valid positive numbers. FTE Hours must be greater than 0.
                </div>

            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const weeklyHoursInput = document.getElementById('weeklyHours');
        const fteHoursInput = document.getElementById('fteHours');
        const knownSalaryInput = document.getElementById('knownSalary');
        const ftePercentageDisplay = document.getElementById('ftePercentageDisplay');
        const calculatedSalaryDisplay = document.getElementById('calculatedSalaryDisplay');
        const knownSalaryLabel = document.getElementById('known-salary-label');
        const knownSalaryHelp = document.getElementById('known-salary-help');
        const calculatedSalaryLabelDisplay = document.getElementById('calculated-salary-label-display');
        const calculatedFormulaDisplay = document.getElementById('calculated-formula-display');
        const errorMessage = document.getElementById('errorMessage');
        const tabButtons = document.querySelectorAll('.tab-button');

        // State (Default to Mode 1: Calculate Base Salary)
        let calculationMode = 1; // 1: Calculate Base Salary (Known: FTE Salary), 2: Calculate FTE Salary (Known: Base Salary)

        // Helper function for currency formatting
        const formatter = new Intl.NumberFormat('en-GB', {
            style: 'currency',
            currency: 'GBP',
            minimumFractionDigits: 2,
            maximumFractionDigits: 2,
        });

        // --- Core Calculation Logic ---
        function calculateSalary() {
            errorMessage.classList.add('hidden');

            const weeklyHours = parseFloat(weeklyHoursInput.value);
            const fteHours = parseFloat(fteHoursInput.value);
            const knownSalary = parseFloat(knownSalaryInput.value);

            // 1. Validate inputs
            if (isNaN(weeklyHours) || weeklyHours < 0 || 
                isNaN(fteHours) || fteHours <= 0 || 
                isNaN(knownSalary) || knownSalary < 0) {
                
                ftePercentageDisplay.textContent = 'N/A';
                calculatedSalaryDisplay.textContent = '£0.00';
                errorMessage.classList.remove('hidden');
                return;
            }

            // 2. Calculate FTE Percentage
            const ftePercentage = Math.min(weeklyHours / fteHours, 1); // Cap at 100%
            const ftePercentageFormatted = (ftePercentage * 100).toFixed(2) + '%';
            ftePercentageDisplay.textContent = ftePercentageFormatted;

            let calculatedSalary = 0;
            let formulaText = '';
            
            // 3. Determine Mode and Calculate Final Salary
            if (calculationMode === 1) {
                // Mode 1: Calculate Base Salary (Known: FTE Salary)
                calculatedSalary = knownSalary * ftePercentage;
                formulaText = 'FTE Salary × FTE %';
            } else {
                // Mode 2: Calculate FTE Salary (Known: Base Salary)
                // Use a small epsilon to avoid division by zero or near-zero errors
                if (ftePercentage > 0.0001) {
                    calculatedSalary = knownSalary / ftePercentage;
                    formulaText = 'Base Salary ÷ FTE %';
                } else {
                    calculatedSalary = 0;
                    formulaText = 'FTE % is too low for calculation';
                }
            }

            // 4. Update Results
            calculatedSalaryDisplay.textContent = formatter.format(calculatedSalary);
            calculatedFormulaDisplay.textContent = formulaText;
        }

        // --- UI Update Logic ---
        function updateUIForMode(mode) {
            calculationMode = mode;

            // Reset tab styles
            tabButtons.forEach(btn => {
                btn.classList.remove('text-indigo-600', 'border-indigo-600', 'bg-indigo-50');
                btn.classList.add('text-gray-500', 'hover:text-gray-700', 'hover:bg-gray-50');
            });

            // Set active tab styles
            const activeTab = document.querySelector(`.tab-button[data-mode="${mode}"]`);
            activeTab.classList.remove('text-gray-500', 'hover:text-gray-700', 'hover:bg-gray-50');
            activeTab.classList.add('text-indigo-700', 'border-indigo-600', 'bg-indigo-100');

            // Update Input Labels and Help Text
            if (mode === 1) {
                // Mode 1: Calculate Base Salary (Known: FTE Salary)
                knownSalaryLabel.textContent = '3. Enter the Full-Time Equivalent (FTE) Salary (£)';
                knownSalaryHelp.textContent = 'Enter the full-time equivalent salary (what a full-time employee would earn) to calculate the prorated Base Salary.';
                calculatedSalaryLabelDisplay.textContent = 'Calculated Base Salary';
                knownSalaryInput.value = 45000.00; // Example for Mode 1
            } else {
                // Mode 2: Calculate FTE Salary (Known: Base Salary)
                knownSalaryLabel.textContent = '3. Enter the Team Member\'s Base Salary (£)';
                knownSalaryHelp.textContent = 'Enter the team member\'s actual annual salary (Base Salary) to calculate the Full-Time Equivalent (FTE) Salary.';
                calculatedSalaryLabelDisplay.textContent = 'Calculated FTE Salary';
                knownSalaryInput.value = 36000.00; // Example for Mode 2
            }
            
            // Re-run calculation with new inputs and mode
            calculateSalary();
        }

        // --- Event Listeners ---
        function attachListeners() {
            // Attach calculation listeners to all relevant inputs
            weeklyHoursInput.addEventListener('input', calculateSalary);
            fteHoursInput.addEventListener('input', calculateSalary);
            knownSalaryInput.addEventListener('input', calculateSalary);

            // Attach mode change listeners to tabs
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const mode = parseInt(button.dataset.mode);
                    updateUIForMode(mode);
                });
            });

            // Initialize the UI and calculate the initial value
            updateUIForMode(1); // Start in "Calculate Base Salary" mode
        }

        // Initialize the application
        window.onload = attachListeners;
    </script>
</body>
</html>